import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import{defineEventHandler as t,handleCacheHeaders as o,splitCookiesString as n,isEvent as r,createEvent as s,fetchWithEvent as i,getRequestHeader as a,eventHandler as c,setHeaders as u,sendRedirect as l,proxyRequest as d,setResponseStatus as m,setResponseHeader as f,send as h,getRequestHeaders as p,removeResponseHeader as g,createError as x,getResponseHeader as b,lazyEventHandler as y,useBase as v,createApp as _,createRouter as w,toNodeListener as R}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/h3/dist/index.mjs";import{createFetch as H,Headers as P}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/ofetch/dist/node.mjs";import C from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/destr/dist/index.mjs";import{createCall as j,createFetch as E}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/unenv/runtime/fetch/index.mjs";import{createHooks as D}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/hookable/dist/index.mjs";import{klona as A}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/klona/dist/index.mjs";import{snakeCase as U}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/scule/dist/index.mjs";import k,{defuFn as G}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/defu/dist/defu.mjs";import{hash as T}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/ohash/dist/index.mjs";import{parseURL as S,withoutBase as I,joinURL as L,getQuery as q,withQuery as F,decodePath as M,withLeadingSlash as O,withoutTrailingSlash as z}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/ufo/dist/index.mjs";import{createStorage as N,defineDriver as $,prefixStorage as W}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/unstorage/dist/index.mjs";import B from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/unstorage/drivers/fs.mjs";import K from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/unstorage/drivers/fs-lite.mjs";import X from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/unstorage/drivers/lru-cache.mjs";import{toRouteMatcher as V,createRouter as J}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/radix3/dist/index.mjs";import{promises as Q}from"node:fs";import{fileURLToPath as Y}from"node:url";import{dirname as Z,resolve as ee,isAbsolute as te}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/pathe/dist/index.mjs";import{ipxFSStorage as oe,ipxHttpStorage as ne,createIPX as re,createIPXH3Handler as se}from"file:///home/heleno/Documentos/GitHub/Portfolio/node_modules/ipx/dist/index.mjs";function getEnv(t,o){const n=U(t).toUpperCase();return C(e.env[o.prefix+n]??e.env[o.altPrefix+n])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(t,o,n=""){for(const r in t){const s=n?`${n}_${r}`:r,i=getEnv(s,o);_isObject(t[r])?_isObject(i)?(t[r]={...t[r],...i},applyEnv(t[r],o,s)):void 0===i?applyEnv(t[r],o,s):t[r]=i??t[r]:t[r]=i??t[r],o.envExpansion&&"string"==typeof t[r]&&(t[r]=t[r].replace(ie,((t,o)=>e.env[o]||t)))}return t}const ie=/{{(.*?)}}/g;const ae=G({nuxt:{}}),ce={app:{baseURL:"/",buildId:"eeaa45ed-3aa1-4224-8654-b9426abe16fc",buildAssetsDir:"nuxt",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1},"/":{prerender:!0},"/nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{site:{defaultLocale:"pt-BR",url:""}},ipx:{baseURL:"/_ipx",alias:{},fs:{dir:["/home/heleno/Documentos/GitHub/Portfolio/public"]},http:{domains:[]}}},ue={prefix:"NITRO_",altPrefix:ce.nitro.envPrefix??e.env.NITRO_ENV_PREFIX??"_",envExpansion:ce.nitro.envExpansion??e.env.NITRO_ENV_EXPANSION??!1},le=_deepFreeze(applyEnv(A(ce),ue));function useRuntimeConfig(e){if(!e)return le;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=A(ce);return applyEnv(t,ue),e.context.nitro.runtimeConfig=t,t}function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const o of t){const t=e[o];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}_deepFreeze(A(ae)),new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const o=useRuntimeConfig();if(t in o)return o[t]}});const de=[{baseName:"server",dir:"/home/heleno/Documentos/GitHub/Portfolio/server/assets"}],me=N();for(const e of de)me.mount(e.baseName,B({base:e.dir}));const normalizeFsKey=e=>e.replaceAll(":","_"),fe=$((e=>{const t=K({base:e.base}),o=X({max:1e3});return{...t,async setItem(e,n,r){await Promise.all([t.setItem(normalizeFsKey(e),n,r),o.setItem(e,n,r)])},hasItem:async(e,n)=>await o.hasItem(e,n)||await t.hasItem(normalizeFsKey(e),n),getItem:async(e,n)=>await o.getItem(e,n)||await t.getItem(normalizeFsKey(e),n)}})),he=N({});function useStorage(e=""){return e?W(he,e):he}he.mount("/assets",me),he.mount("internal:nuxt:prerender",fe({driver:"/home/heleno/Documentos/GitHub/Portfolio/node_modules/nuxt/dist/core/runtime/nitro/cache-driver.js",base:"/home/heleno/Documentos/GitHub/Portfolio/.nuxt/cache/nitro/prerender"})),he.mount("data",K({driver:"fsLite",base:"/home/heleno/Documentos/GitHub/Portfolio/.data/kv"})),he.mount("root",B({driver:"fs",readOnly:!0,base:"/home/heleno/Documentos/GitHub/Portfolio",ignore:["**/node_modules/**","**/.git/**"]})),he.mount("src",B({driver:"fs",readOnly:!0,base:"/home/heleno/Documentos/GitHub/Portfolio/server",ignore:["**/node_modules/**","**/.git/**"]})),he.mount("build",B({driver:"fs",readOnly:!1,base:"/home/heleno/Documentos/GitHub/Portfolio/.nuxt",ignore:["**/node_modules/**","**/.git/**"]})),he.mount("cache",B({driver:"fs",readOnly:!1,base:"/home/heleno/Documentos/GitHub/Portfolio/.nuxt/cache",ignore:["**/node_modules/**","**/.git/**"]}));const pe={name:"_",base:"/cache",swr:!0,maxAge:1};const cachedFunction=function(e,t={}){t={...pe,...t};const o={},n=t.group||"nitro/functions",s=t.name||e.name||"_",i=t.integrity||T([e,t]),a=t.validate||(e=>void 0!==e.value);return async(...c)=>{if(await(t.shouldBypassCache?.(...c)))return e(...c);const u=await(t.getKey||getKey)(...c),l=await(t.shouldInvalidateCache?.(...c)),d=await async function(e,r,c,u){const l=[t.base,n,s,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let d=await useStorage().getItem(l)||{};if("object"!=typeof d){d={};const e=new Error("Malformed data read from cache.");console.error("[nitro] [cache]",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})}const m=1e3*(t.maxAge??t.maxAge??0);m&&(d.expires=Date.now()+m);const f=c||d.integrity!==i||m&&Date.now()-(d.mtime||0)>m||!1===a(d),h=f?(async()=>{const n=o[e];n||(void 0!==d.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(d.value=void 0,d.integrity=void 0,d.mtime=void 0,d.expires=void 0),o[e]=Promise.resolve(r()));try{d.value=await o[e]}catch(t){throw n||delete o[e],t}if(!n&&(d.mtime=Date.now(),d.integrity=i,delete o[e],!1!==a(d))){const e=useStorage().setItem(l,d).catch((e=>{console.error("[nitro] [cache] Cache write error.",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})}));u&&u.waitUntil&&u.waitUntil(e)}})():Promise.resolve();return void 0===d.value?await h:f&&u&&u.waitUntil&&u.waitUntil(h),t.swr&&!1!==a(d)?(h.catch((e=>{console.error("[nitro] [cache] SWR handler error.",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})})),d):h.then((()=>d))}(u,(()=>e(...c)),l,c[0]&&r(c[0])?c[0]:void 0);let m=d.value;return t.transform&&(m=await t.transform(d,...c)||m),m}};function getKey(...e){return e.length>0?T(e,{}):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,o,n)=>o in t?t[o]:Reflect.get(e,o,n),set:(e,o,n,r)=>o in t?(t[o]=n,!0):Reflect.set(e,o,n,r)})}const cachedEventHandler=function(e,r=pe){const a=(r.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),c={...r,getKey:async e=>{const t=await(r.getKey?.(e));if(t)return escapeKey(t);const o=e.node.req.originalUrl||e.node.req.url||e.path;return[`${escapeKey(decodeURI(S(o).pathname)).slice(0,16)||"index"}.${T(o)}`,...a.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${T(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:r.group||"nitro/handlers",integrity:r.integrity||T([e,r])},u=cachedFunction((async t=>{const o={};for(const e of a)o[e]=t.node.req.headers[e];const n=cloneWithProxy(t.node.req,{headers:o}),u={};let l;const d=cloneWithProxy(t.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>u[e],setHeader(e,t){return u[e]=t,this},getHeaderNames:()=>Object.keys(u),hasHeader:e=>e in u,removeHeader(e){delete u[e]},getHeaders:()=>u,end(e,t,o){return"string"==typeof e&&(l=e),"function"==typeof t&&t(),"function"==typeof o&&o(),this},write(e,t,o){return"string"==typeof e&&(l=e),"function"==typeof t&&t(),"function"==typeof o&&o(),this},writeHead(e,t){if(this.statusCode=e,t)for(const e in t)this.setHeader(e,t[e]);return this}}),m=s(n,d);m.fetch=(e,t)=>i(m,e,t,{fetch:useNitroApp().localFetch}),m.$fetch=(e,t)=>i(m,e,t,{fetch:globalThis.$fetch}),m.context=t.context,m.context.cache={options:c};const f=await e(m)||l,h=m.node.res.getHeaders();h.etag=String(h.Etag||h.etag||`W/"${T(f)}"`),h["last-modified"]=String(h["Last-Modified"]||h["last-modified"]||(new Date).toUTCString());const p=[];r.swr?(r.maxAge&&p.push(`s-maxage=${r.maxAge}`),r.staleMaxAge?p.push(`stale-while-revalidate=${r.staleMaxAge}`):p.push("stale-while-revalidate")):r.maxAge&&p.push(`max-age=${r.maxAge}`),p.length>0&&(h["cache-control"]=p.join(", "));return{code:m.node.res.statusCode,headers:h,body:f}}),c);return t((async t=>{if(r.headersOnly){if(o(t,{maxAge:r.maxAge}))return;return e(t)}const s=await u(t);if(t.node.res.headersSent||t.node.res.writableEnded)return s.body;if(!o(t,{modifiedTime:new Date(s.headers["last-modified"]),etag:s.headers.etag,maxAge:r.maxAge})){t.node.res.statusCode=s.code;for(const e in s.headers){const o=s.headers[e];"set-cookie"===e?t.node.res.appendHeader(e,n(o)):t.node.res.setHeader(e,o)}return s.body}}))};function hasReqHeader(e,t,o){const n=a(e,t);return n&&"string"==typeof n&&n.toLowerCase().includes(o)}function _captureError(e,t){console.error(`[nitro] [${t}]`,e),useNitroApp().captureError(e,{tags:[t]})}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return n(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[o,n]of e)if("set-cookie"===o)for(const e of normalizeCookieHeader(n))t.append("set-cookie",e);else t.set(o,joinHeaders(n));return t}const ge=V(J({routes:useRuntimeConfig().nitro.routeRules}));function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(I(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return k({},...ge.matchAll(e).reverse())}const xe=[],errorHandler=async function(t,o){const{stack:n,statusCode:r,statusMessage:s,message:i}=function(t){const o="function"==typeof e.cwd?e.cwd():"/",n=(t.stack||"").split("\n").splice(1).filter((e=>e.includes("at "))).map((e=>({text:e.replace(o+"/","./").replace("webpack:/","").replace("file://","").trim(),internal:e.includes("node_modules")&&!e.includes(".cache")||e.includes("internal")||e.includes("new Promise")}))),r=t.statusCode||500;return{stack:n,statusCode:r,statusMessage:t.statusMessage??(404===r?"Not Found":""),message:t.message||t.toString()}}(t),a={url:o.path,statusCode:r,statusMessage:s,message:i,stack:"",data:t.data};if(t.unhandled||t.fatal){const e=["[nuxt]","[request error]",t.unhandled&&"[unhandled]",t.fatal&&"[fatal]",200!==Number(a.statusCode)&&`[${a.statusCode}]`].filter(Boolean).join(" ");console.error(e,a.message+"\n"+n.map((e=>"  "+e.text)).join("  \n"))}if(o.handled)return;if(m(o,200!==a.statusCode&&a.statusCode||500,a.statusMessage),function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(o))return f(o,"Content-Type","application/json"),h(o,JSON.stringify(a));const c=p(o),u=o.path.startsWith("/__nuxt_error")||!!c["x-nuxt-error"]?null:await useNitroApp().localFetch(F(L(useRuntimeConfig(o).app.baseURL,"/__nuxt_error"),a),{headers:{...c,"x-nuxt-error":"true"},redirect:"manual"}).catch((()=>null));if(!u){const{template:e}=await import("./_/error-500.mjs");if(o.handled)return;return f(o,"Content-Type","text/html;charset=UTF-8"),h(o,e(a))}const l=await u.text();if(!o.handled){for(const[e,t]of u.headers.entries())f(o,e,t);return m(o,u.status&&200!==u.status?u.status:void 0,u.statusText),h(o,l)}},be={};const ye={"/nuxt/builds/meta/":{maxAge:31536e3},"/nuxt/builds/":{maxAge:1},"/nuxt/":{maxAge:31536e3}};function getAsset(e){return be[e]}const ve=new Set(["HEAD","GET"]),_e={gzip:".gz",br:".br"},we=[{route:"",handler:c((e=>{if(e.method&&!ve.has(e.method))return;let t,o=M(O(z(S(e.path).pathname)));const n=[...String(a(e,"accept-encoding")||"").split(",").map((e=>_e[e.trim()])).filter(Boolean).sort(),""];n.length>1&&f(e,"Vary","Accept-Encoding");for(const e of n)for(const n of[o+e,L(o,"index.html"+e)]){const e=getAsset(n);if(e){t=e,o=n;break}}if(!t){if(function(e=""){if(be[e])return!0;for(const t in ye)if(e.startsWith(t))return!0;return!1}(o))throw g(e,"Cache-Control"),x({statusMessage:"Cannot find static asset "+o,statusCode:404});return}if(a(e,"if-none-match")===t.etag)return m(e,304,"Not Modified"),"";const r=a(e,"if-modified-since"),s=new Date(t.mtime);return r&&t.mtime&&new Date(r)>=s?(m(e,304,"Not Modified"),""):(t.type&&!b(e,"Content-Type")&&f(e,"Content-Type",t.type),t.etag&&!b(e,"ETag")&&f(e,"ETag",t.etag),t.mtime&&!b(e,"Last-Modified")&&f(e,"Last-Modified",s.toUTCString()),t.encoding&&!b(e,"Content-Encoding")&&f(e,"Content-Encoding",t.encoding),t.size>0&&!b(e,"Content-Length")&&f(e,"Content-Length",t.size),function(e){const t=Z(Y(globalThis._importMeta_.url));return Q.readFile(ee(t,be[e].path))}(o))})),lazy:!1,middleware:!0,method:void 0},{route:"/_ipx/**",handler:y((()=>{const e=useRuntimeConfig().ipx||{},t=e?.fs?.dir?(Array.isArray(e.fs.dir)?e.fs.dir:[e.fs.dir]).map((e=>te(e)?e:Y(new URL(e,globalThis._importMeta_.url)))):void 0,o=e.fs?.dir?oe({...e.fs,dir:t}):void 0,n=e.http?.domains?ne({...e.http}):void 0;if(!o&&!n)throw new Error("IPX storage is not configured!");const r={...e,storage:o||n,httpStorage:n},s=re(r),i=se(s);return v(e.baseURL,i)})),lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:()=>import("./_/renderer.mjs").then((function(e){return e.r})),lazy:!0,middleware:!1,method:void 0}];const Re=function(){const e=useRuntimeConfig(),t=D(),captureError=(e,o={})=>{const n=t.callHookParallel("error",e,o).catch((e=>{console.error("Error while capturing another error",e)}));if(o.event&&r(o.event)){const t=o.event.context.nitro?.errors;t&&t.push({error:e,context:o}),o.event.waitUntil&&o.event.waitUntil(n)}},o=_({debug:C(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),errorHandler(e,t)),onRequest:async e=>{await Re.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await Re.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await Re.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),n=w({preemptive:!0}),s=j(R(o)),a=E(s,globalThis.fetch),localFetch=(e,t)=>a(e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))),m=H({fetch:localFetch,Headers:P,defaults:{baseURL:e.app.baseURL}});var f;globalThis.$fetch=m,o.use((f={localFetch:localFetch},c((e=>{const t=getRouteRules(e);if(t.headers&&u(e,t.headers),t.redirect){let o=t.redirect.to;if(o.endsWith("/**")){let n=e.path;const r=t.redirect._redirectStripBase;r&&(n=I(n,r)),o=L(o.slice(0,-3),n)}else if(e.path.includes("?")){const t=q(e.path);o=F(o,t)}return l(e,o,t.redirect.statusCode)}if(t.proxy){let o=t.proxy.to;if(o.endsWith("/**")){let n=e.path;const r=t.proxy._proxyStripBase;r&&(n=I(n,r)),o=L(o.slice(0,-3),n)}else if(e.path.includes("?")){const t=q(e.path);o=F(o,t)}return d(e,o,{fetch:f.localFetch,...t.proxy})}})))),o.use(c((e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t&&Object.assign(e.context,t),e.fetch=(t,o)=>i(e,t,o,{fetch:localFetch}),e.$fetch=(t,o)=>i(e,t,o,{fetch:m}),e.waitUntil=o=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(o),t?.waitUntil&&t.waitUntil(o)},e.captureError=(t,o)=>{captureError(t,{event:e,...o})}})));for(const t of we){let r=t.lazy?y(t.handler):t.handler;if(t.middleware||!t.route){const n=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");o.use(n,r)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(r=cachedEventHandler(r,{group:"nitro/routes",...e.cache})),n.use(t.route,r,t.method)}}o.use(e.app.baseURL,n.handler);const h={hooks:t,h3App:o,router:n,localCall:s,localFetch:localFetch,captureError:captureError};for(const e of xe)try{e(h)}catch(e){throw captureError(e,{tags:["plugin"]}),e}return h}(),useNitroApp=()=>Re,He=Re.localFetch,closePrerenderer=()=>Re.hooks.callHook("close");e.on("unhandledRejection",(e=>_captureError(e,"unhandledRejection"))),e.on("uncaughtException",(e=>_captureError(e,"uncaughtException")));export{useNitroApp as a,useStorage as b,closePrerenderer as c,getRouteRules as g,He as l,useRuntimeConfig as u};
//# sourceMappingURL=runtime.mjs.map
